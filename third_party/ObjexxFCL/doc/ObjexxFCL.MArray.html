<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>ObjexxFCL Users Guide: MArray</title>
	<meta name="description" content="Objexx Fortran-C++ Library">
	<meta name="keywords" content="ObjexxFCL, Fortran-to-C++, F2C++, F2Cpp, F2Cxx, F2C, Fortran, C++, array library">
	<meta name="copyright" content="Copyright (c) 2000-2017 Objexx Engineering, Inc. All Rights Reserved.">
	<link rel="icon" type="image/png" href="img/favicon.png">
	<link rel="stylesheet" href="css/Objexx.css" type="text/css">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#CC3366" vlink="#990033" alink="#FF3366">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody>
	<tr>
		<td></td>
		<td height="70"><a href="ObjexxFCL.html"><img src="img/Objexx.logo.svg" alt="Home" border="0" align="left" height="50"></a></td>
		<td></td>
		<td colspan="3" valign="middle"><div id="Title">ObjexxFCL 4.2</div></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td colspan="5" height="16" valign="top" bgcolor="#EB7A87"></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td height="24" colspan="5"></td>
		<td></td>
	</tr>
	<tr>
		<td height="300">&nbsp;</td>
		<td valign="top">
			<div id="sectionLinksTop">
				<a href="ObjexxFCL.html">Home</a>
			</div>
			<div id="sectionLinks">
				<a href="ObjexxFCL.Release.html">Release</a>
				<a href="ObjexxFCL.Users.html">Users Guide</a>
				<a href="ObjexxFCL.Developers.html">Developers</a>
				<a href="ObjexxFCL.Support.html">Support</a>
				<a href="http://objexx.com">Web</a>
			</div>
		</td>
		<td></td>
		<td width="500" valign="top">
			<h1>MArray</h1>
			<p class="body">The MArray class template hierarchy provides Fortran-compatible "member" arrays, which allow members of objects in arrays to be treated as arrays themselves. MArrays are proxies giving access to the members of other objects.</p>
			<table border="1" cellspacing="0" cellpadding="12">
				<tr>
					<td bgcolor="#F7F4F7"><pre>struct C
{
   int m;
};

Array1D< C > a( 5 ); // Array of C objects

// Different ways to make a member array for the m members of the elements of a
MArray1< Array1D< C >, int > am( a, &C::m ); // Now am( i ) == a( i ).m
auto am( make_MArray1( a, &C::m ) ); // Simpler way with maker function
auto am( MA1( a, &C::m ) ); // Shorthand maker function
auto am( a.ma( &decltype( a )::Value::m ) ); // Array ma method alternative</pre>
				</tr>
			</table>
			<p class="body">It would be cleaner if, as in Fortran, we could treat the member array like a built-in array member or method, so that we could refer directly to <span class="source">a.m</span> as an array and <span class="source">a(i).m</span> as an element. Since Arrays are not built into C++ the compiler cannot do this for us. Instead, a method for adding such project-specific methods is provided by included files such as Array1.Project.MArray.hh.</p>
			<h2>Tip</h2>
			<p class="body">Member arrays are a nice syntactic convenience provided by Fortran but they can also cause confusion by making it look like something is not an array or that something is a member of an array instead of its elements. Member arrays can also have performance impacts due to the construction time and extra lookup overhead due to the extra level of indirection. For these reasons, and since they are not emulated as cleanly as in Fortran, member arrays are best avoided and would be good to migrate away from following a Fortran-to-C++ conversion.</p>
		</td>
		<td></td>
		<td width="100%" valign="top">
		</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td colspan="3" height="30" valign="bottom" class="footer_text">
			<a href="ObjexxFCL.html"><span class="footer_link">Home</span></a> |
			<a href="ObjexxFCL.Release.html"><span class="footer_link">Release Notes</span></a> |
			<a href="ObjexxFCL.Users.html"><span class="footer_link">Users Guide</span></a> |
			<a href="ObjexxFCL.Developers.html"><span class="footer_link">Developers Guide</span></a> |
			<a href="ObjexxFCL.Support.html"><span class="footer_link">Support</span></a> |
			<a href="ObjexxFCL.License.txt"><span class="footer_link">License</span></a> |
			<a href="http://objexx.com"><span class="footer_link">Web</span></a>
		</td>
		<td></td>
	</tr>
	<tr>
		<td height="21"></td>
		<td></td>
		<td></td>
		<td colspan="3" valign="bottom" class="footer_text">Copyright &copy; 2000-2017 Objexx Engineering, Inc. All Rights Reserved.</td>
		<td></td>
	</tr>
	<tr>
		<td><img src="img/spacer.gif" alt="" style="width:25px; height:9px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:100px; height:1px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:40px; height:1px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:500px; height:1px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:40px; height:1px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:100%; height:1px"></td>
		<td><img src="img/spacer.gif" alt="" style="width:25px; height:1px"></td>
	</tr>
</tbody>
</table>
</body>
</html>
